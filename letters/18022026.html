<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Peque√±o regalo</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #050a14;
      overflow: hidden;
      font-family: sans-serif;
    }

    .gift-container {
      position: relative;
      cursor: pointer;
      z-index: 10;
      width: 100px;
      height: 80px;
      margin-top: 220px;
    }

    /* --- HEART STYLES --- */
    .heart {
      position: absolute;
      top: -60px; /* Positioned above the box */
      left: 50%;
      transform: translateX(-50%) scale(0);
      font-size: 120px;
      transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      opacity: 0;
      pointer-events: none;
    }

    /* Beating Animation */
    @keyframes heartBeat {
      0% { transform: translateX(-50%) scale(1); }
      25% { transform: translateX(-50%) scale(1.2); }
      50% { transform: translateX(-50%) scale(1); }
      75% { transform: translateX(-50%) scale(1.2); }
      100% { transform: translateX(-50%) scale(1); }
    }

    /* Triggered when box opens */
    .open .heart {
      opacity: 1;
      transform: translateX(-50%) scale(1);
      animation: heartBeat 1.2s infinite;
      transition-delay: 0.5s; /* Wait for lid to move slightly */
    }

    .box-body {
      position: absolute;
      width: 100px;
      height: 80px;
      background-color: #2196F3;
      border-radius: 0 0 8px 8px;
      z-index: 2;
    }

    .box-body::before {
      content: "";
      position: absolute;
      width: 16px; height: 100%;
      background-color: #FFC107;
      left: 50%; transform: translateX(-50%);
    }

    .box-lid {
      position: absolute;
      top: -20px; left: -10px;
      width: 120px; height: 25px;
      background-color: #1565C0;
      border-radius: 4px;
      z-index: 3;
      transition: all 0.8s cubic-bezier(0.5, -0.5, 0.5, 1.5);
    }
	
	.open .box-body
	{
		opacity: 0;
		transition: opacity 0.8s ease;
		transition-delay: 0.5s; /* Waits half a second so the "opening" action is visible */
		pointer-events: none;   /* Makes it so you can't click it once it's gone */
	}

    .box-lid::after {
      content: "";
      position: absolute;
      width: 16px; height: 100%;
      background-color: #FFC107;
      left: 50%; transform: translateX(-50%);
    }

    .bow {
      position: absolute;
      bottom: 100%; left: 50%;
      transform: translateX(-50%);
      width: 30px; height: 15px;
    }

    .bow::before, .bow::after {
      content: "";
      position: absolute;
      width: 12px; height: 12px;
      border: 4px solid #FFC107;
      border-radius: 50%;
    }
    .bow::before { left: -6px; }
    .bow::after { right: -6px; }

    .flower {
      position: fixed;
      pointer-events: none;
      filter: hue-rotate(210deg) saturate(180%);
      transition: transform 2.5s cubic-bezier(0.19, 1, 0.22, 1), opacity 1s;
      opacity: 0;
      z-index: 100;
    }

    @keyframes subtleFloat {
      0%, 100% { margin-top: 0; }
      50% { margin-top: 0px; }
    }

    .open .box-lid {
      transform: translateY(-200px) rotate(40deg);
      opacity: 0;
    }
  </style>
</head>
<body>

  <div class="gift-container" id="giftBox">
    <div class="heart">‚ù§Ô∏è</div> <div class="box-lid"><div class="bow"></div></div>
    <div class="box-body"></div>
  </div>

  <script>
    const font = {
      'F': [[0,0],[1,0],[2,0],[3,0],[0,1],[0,2],[1,2],[2,2],[0,3],[0,4]],
      'E': [[0,0],[1,0],[2,0],[3,0],[0,1],[0,2],[1,2],[2,2],[0,3],[0,4],[1,4],[2,4],[3,4]],
      'L': [[0,0],[0,1],[0,2],[0,3],[0,4],[1,4],[2,4],[3,4]],
      'I': [[0,0],[1,0],[2,0],[1,1],[1,2],[1,3],[0,4],[1,4],[2,4]],
      'Z': [[0,0],[1,0],[2,0],[3,0],[3,1],[2,2],[1,3],[0,4],[1,4],[2,4],[3,4]],
      'C': [[1,0],[2,0],[3,0],[0,1],[0,2],[0,3],[1,4],[2,4],[3,4]],
      'U': [[0,0],[3,0],[0,1],[3,1],[0,2],[3,2],[0,3],[3,3],[1,4],[2,4]],
      'M': [[0,0],[4,0],[0,1],[1,1],[3,1],[4,1],[0,2],[2,2],[4,2],[0,3],[4,3],[0,4],[4,4]],
      'P': [[0,0],[1,0],[2,0],[3,0],[0,1],[4,1],[0,2],[1,2],[2,2],[3,2],[0,3],[0,4]],
      'A': [[2,0],[1,1],[3,1],[0,2],[4,2],[0,3],[1,3],[2,3],[3,3],[4,3],[0,4],[4,4]],
      '√ë': [[0,0],[4,0],[1,-1],[2,-1],[3,-1],[0,1],[1,1],[4,1],[0,2],[2,2],[4,2],[0,3],[4,3],[0,4],[4,4]],
      'O': [[1,0],[2,0],[3,0],[0,1],[4,1],[0,2],[4,2],[0,3],[4,3],[1,4],[2,4],[3,4]],
      'S': [[1,0],[2,0],[3,0],[0,1],[1,2],[2,2],[3,3],[0,4],[1,4],[2,4]],
      'T': [[0,0],[1,0],[2,0],[3,0],[4,0],[2,1],[2,2],[2,3],[2,4]],
      '¬°': [[2,0],[2,2],[2,3],[2,4]],
      '!': [[2,0],[2,1],[2,2],[2,4]],
      ',': [[1,4],[1,5]]
    };

    const emojis = ['üå∏', 'üí†', 'üå∑', '‚ú®'];
    let opened = false;

    const isMobile = window.innerWidth < 600;
    const scale = isMobile ? 0.6 : 1; 
    const dotSpacing = 9 * scale;
    const charWidth = 45 * scale;
    const rowGap = 80 * scale;
    const flowerSize = isMobile ? '7px' : '10px';

    function createLetter(char, offsetX, offsetY, startX, startY) {
      if (!font[char]) return;
      const points = font[char];

      points.forEach((point, index) => {
        const f = document.createElement('div');
        f.className = 'flower';
        f.innerText = emojis[Math.floor(Math.random() * emojis.length)];
        f.style.fontSize = flowerSize;
        f.style.left = `${startX}px`;
        f.style.top = `${startY}px`;
        document.body.appendChild(f);

        const dX = offsetX + (point[0] * dotSpacing);
        const dY = offsetY + (point[1] * dotSpacing);

        setTimeout(() => {
          f.style.opacity = '1';
          f.style.transform = `translate(${dX - startX}px, ${dY - startY}px)`;
          f.style.animation = `subtleFloat ${2 + Math.random()}s ease-in-out infinite`;
        }, (index * 5));
      });
    }

    function drawRow(text, y, startY, sX, sY) {
      const totalWidth = text.length * charWidth;
      let x = (window.innerWidth / 2) - (totalWidth / 2);
      
      text.split('').forEach(char => {
        if(char !== ' ') createLetter(char, x, y, sX, sY);
        x += charWidth;
      });
    }

    document.getElementById('giftBox').addEventListener('click', function() {
      if (opened) return;
      opened = true;
      this.classList.add('open');

      const rect = this.getBoundingClientRect();
      const sX = rect.left + (rect.width / 2);
      const sY = rect.top + 20;

      const topMargin = isMobile ? 80 : 100;

      drawRow("¬°FELIZ", topMargin, 0, sX, sY);
      drawRow("CUMPLEA√ëOS", topMargin + rowGap, 0, sX, sY);
      drawRow("PAMI,TE AMO!", topMargin + (rowGap * 2), 0, sX, sY);
    });
  </script>
</body>
</html>
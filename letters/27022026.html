<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para tú</title>
    <style>
        body {
            margin: 0;
            padding: 10vw; /* Keeps text away from the absolute edges */
            background-color: #0d0d12; /* Very deep, elegant dark blue/black */
            color: #e2e8f0; /* Soft off-white */
            font-family: 'Courier New', Courier, monospace; /* Classic typewriter feel */
            font-size: 1.2rem;
            line-height: 1.5;
            height: 80vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        /* This ensures line breaks (\n) in JavaScript render properly on screen */
        #typewriter-text {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* The blinking cursor */
        #cursor {
            display: inline-block;
            width: 10px;
            height: 1.2rem;
            background-color: #e2e8f0;
            vertical-align: middle;
            margin-left: 2px;
            animation: blink 1s step-end infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
    </style>
</head>
<body>

    <div>
        <span id="typewriter-text"></span><span id="cursor"></span>
    </div>

    <script>
        const textElement = document.getElementById('typewriter-text');
        
        // Helper function to create pauses
        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // Helper function to generate a random typing speed 
        // (makes it look like a human is typing, not a robot)
        const randomSpeed = (min = 40, max = 120) => Math.floor(Math.random() * (max - min + 1)) + min;

        // This is your script. You can edit the text, the pauses, and the deletes.
        // '\n' creates a line break (Enter key).
        const story = [
            { action: 'pause', time: 1500 }, // Wait 1.5 seconds before starting
            { action: 'type', text: 'Hola mi cielo...' },
            { action: 'pause', time: 1000 },
            { action: 'type', text: '\n\nA veces es muy raro pensar en la dits' }, // Intentional typo
            { action: 'pause', time: 600 },
            { action: 'delete', count: 2 }, // Deletes "ts"
            { action: 'pause', time: 300 },
            { action: 'type', text: 'stancia.' }, // Fixes the word
            { action: 'pause', time: 1500 },
            { action: 'type', text: '\n\nTú allá en México, viviendo tu día...' },
            { action: 'pause', time: 1000 },
            { action: 'type', text: '\nY yo acá en República Cheka' }, // Intentional typo
            { action: 'pause', time: 400 },
            { action: 'delete', count: 2 }, // Deletes "ga"
            { action: 'pause', time: 200 },
            { action: 'type', text: 'ca, viendo cómo cae la noche.' },
            { action: 'pause', time: 2000 },
            { action: 'type', text: '\n\nPero ¿sabes qué es lo más loco?' },
            { action: 'pause', time: 1500 },
            { action: 'type', text: '\nQue cuando cierro los ojos,' },
            { action: 'pause', time: 800 },
            { action: 'type', text: ' solo estamos tú y yo.' },
            { action: 'pause', time: 2000 },
            { action: 'type', text: '\n\nTe extraño muchísimo.' },
            { action: 'pause', time: 1500 },
            { action: 'type', text: '\nTe amo.' },
            { action: 'pause', time: 3000 },
            { action: 'type', text: ' ❤️❤️❤️❤️' }
        ];

        async function runTypewriter() {
            let currentText = "";

            for (const step of story) {
                if (step.action === 'pause') {
                    // Just wait
                    await sleep(step.time);
                } 
                else if (step.action === 'type') {
                    // Type out character by character
                    for (const char of step.text) {
                        currentText += char;
                        textElement.textContent = currentText;
                        
                        // Automatically scroll down if the text gets too long
                        window.scrollTo(0, document.body.scrollHeight);
                        
                        // Wait a random fraction of a second before the next letter
                        await sleep(randomSpeed());
                    }
                } 
                else if (step.action === 'delete') {
                    // Hit the "backspace" key step.count times
                    for (let i = 0; i < step.count; i++) {
                        currentText = currentText.slice(0, -1);
                        textElement.textContent = currentText;
                        await sleep(randomSpeed(80, 150)); // Backspacing is usually a bit slower/deliberate
                    }
                }
            }
        }

        // Start the magic once the page loads
        window.addEventListener('load', runTypewriter);
    </script>
</body>
</html>